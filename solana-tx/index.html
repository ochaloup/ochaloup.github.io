<!DOCTYPE html>
<html>
<head>
  <title>Solana base64 transaction deserializer</title>
  <script defer="defer" src="./dist/bundle.js"></script>
</head>
<body>
  <h1>Solana base64 transaction deserializer</h1>
  
    <textarea type="text" id="messageInput" placeholder="Enter base64 transaction here" rows="15" cols="100"></textarea>
    <br/>
    <input list="clusters" name="cluster" id="cluster" placeholder="https://api.devnet.solana.com" size="40">
    <datalist id="clusters">
        <option value="https://api.devnet.solana.com">
        <option value="https://api.mainnet-beta.solana.com">
        <option value="https://api.testnet.solana.com">
    </datalist>
    <br/>
    <button id="submitButton" onclick="handleDisplayMessage()">Show deserialized format</button>
  
    <hr/>
    <p id="messageOutput"></p>
  
    <script>
        let params = new URL(document.location).searchParams;
        let message = params.get("message");
        if (message) {
          const decodedMessage = window.decodeURIComponent(message);
          document.getElementById("messageInput").value = decodedMessage;
        }

        async function handleDisplayMessage() {
          // this redirects to the same page with the base64 param, not wanted
          // window.location.search = "?message=" + document.getElementById("messageInput").value;
          let encodedMessageInput = window.encodeURIComponent(document.getElementById("messageInput").value);
          window.history.replaceState(undefined, document.title, window.location.pathname + "?message=" + encodedMessageInput);
          await scriptNamespace.deserializeTransaction();
        }
      </script>

  <footer>
    <p>Thanks to <a href="https://github.com/solana-labs/oyster/tree/main/packages/governance-sdk">SPL Governance SDK</a>
    and <a href="https://github.com/debridge-finance/solana-tx-parser-public">Debridge finance SDK</a></p>
  </footer>
</body>
</html>