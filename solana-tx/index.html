<!DOCTYPE html>
<html>
<head>
  <title>Solana base64 transaction deserializer</title>
  <script defer="defer" src="./dist/bundle.js"></script>
</head>
<body>
  <h1>Solana base64 transaction deserializer</h1>
  
    <textarea type="text" id="messageInput" placeholder="Enter base64 transaction here" rows="15" cols="100"></textarea>
    <br/>
    <input list="clusters" name="cluster" id="cluster" placeholder="https://api.devnet.solana.com" size="40">
    <datalist id="clusters">
        <option value="https://api.devnet.solana.com">
        <option value="https://api.mainnet-beta.solana.com">
        <option value="https://api.testnet.solana.com">
    </datalist>
    <br/>
    <button id="submitButton" onclick="handleDisplayMessage()">Show deserialized format</button>
  
    <hr/>
    <p id="messageOutput"></p>
  
    <script>
        let params = new URL(document.location).searchParams;
        let base64 = params.get("base64");
        if (base64) {
          document.getElementById("messageInput").value = base64;
        }

        async function handleDisplayMessage() {
          // this redirects to the same page with the base64 param, not wanted
          // window.location.search = "?base64=" + document.getElementById("messageInput").value;
          window.history.replaceState(undefined, document.title, window.location.pathname + "?base64=" + document.getElementById("messageInput").value);
          await scriptNamespace.deserializeTransaction();
        }
      </script>
</body>
</html>